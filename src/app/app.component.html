<div [ngBusy]="busy"></div>
<table class="notesTable">
      <tr>
            <td class="heading">Notes</td>
      </tr>
      <tr>
            <td class="note-list">
                  <ul>
                        <li class="note-list">
                              Only simulates damage against a single target (i.e. boss)</li>
                        <li class="note-list">Actual
                              rate
                              of fire (especially for lasers) may be limited by browser framerate
                        </li>
                        <li class="note-list">Assumes you've unlocked the appropriate masteries with gems</li>
                        <li class="note-list">1/29/19: Developer confirmed a bug in in-game stats UI for laser damage,
                              so
                              values
                              here are
                              accurate, but stats page is incorrect.</li>
                        <li class="note-list">
                              How do I find the level numbers for the coin upgrades
                              <div class="big-tooltip"><span class="big-tooltiptext">
                                          Until the developer adds level #s back into the tooltips for coin
                                          upgrades,
                                          here is
                                          how you can deduce your level # from in game data:

                                          you can look at the coin upgrade cost for the next level and change the level
                                          # on this
                                          page
                                          until it matches. Or, for things like arrow and
                                          laser damage, after you've set your mastery and talent levels, you can use
                                          the #
                                          displayed in
                                          the "stats" page in game to match the damage # displayed to the right of the
                                          level #
                                          here (it might be slightly off for laser -- some rounding/truncating occurs
                                          in the math).
                                    </span></div>
                        </li>
                        <li class="note-list">
                              How do I decide whether to spend blue gems on coins or red gems
                              <div class="big-tooltip"><span class="big-tooltiptext">
                                          First, find out in
                                          game how many coins you get for 100 blue gems (note: you get 20% more coins
                                          when you spend 100 gems at a time).
                                          Then fill in the value below for how many coins that is. Click "What can I
                                          buy?" to see how many upgrade levels
                                          you could get for that amount of coins (e.g. laser damage). Hover over the
                                          "?" next to the "+" level to see the
                                          actaul dps increase (as opposed to percentage). Compare this with the
                                          "dps/gem" value under "power gems" to
                                          see which gives more dps for 100 blue gems (100 blue gems = 1 red gem).
                                    </span></div>
                        </li>
                  </ul>
            </td>
      </tr>
</table>
<table class="mainTable">
      <tr>
            <td colspan="9">
                  <button class="btn" (click)="save()">Save</button>
                  <div class="tooltip"><span class="tooltiptext">Save all inputs to browser local storage</span></div>
                  <div class="divider"></div>
                  <button class="btn" (click)="load()">Load</button>
                  <div class="tooltip"><span class="tooltiptext">Load all inputs from browser local storage</span></div>
                  <div class="divider"></div>
                  <button class="btn" (click)="reset()">Reset</button>
                  <div class="tooltip"><span class="tooltiptext">Reset all fields to default values</span></div>
                  <div class="divider"></div>
                  <button class="btn" (click)="copy(data)">Copy</button>
                  <div class="tooltip"><span class="tooltiptext">Copy all field values to clipboard</span></div>
                  <div class="divider"></div>
                  <button class="btn" (click)="paste()">Paste</button>
                  <div class="tooltip"><span class="tooltiptext">Paste all field values from clipboard</span></div>
            </td>
      </tr>
      <tr *ngIf="doPaste">
            <td colspan="9">
                  <textarea cols="80" rows="10" [(ngModel)]="pasteText"></textarea>
            </td>
      </tr>
      <tr *ngIf="doPaste">
            <td class="label" colspan="9">Paste the clipboard contents into the text area and press OK</td>
      </tr>
      <tr *ngIf="doPaste">
            <td colspan="9">
                  <button class="btn" (click)="getPaste()">OK</button>
                  <div class="divider"></div>
                  <button class="btn" (click)="cancelPaste()">Cancel</button>
            </td>
      </tr>
      <tr>
            <td class="label">Level</td>
            <td class="value">{{ data.level }} <div class="tooltip"><span class="tooltiptext">Level calculated from
                              talent points</span></div>
            </td>
      </tr>
      <tr>
            <td class="heading">Static Parameters <div class="tooltip"><span class="tooltiptext">Parameters that vary
                              by web
                              browser or have not been confirmed. Leave these alone if you don't know.</span></div>
            </td>
      </tr>
      <tr>
            <td class="label">Laser RoF <div class="tooltip"><span class="tooltiptext">Laser ticks per second from each
                              laser.
                              Depends on browser framerate. Don't change if you don't know it.</span></div>
            </td>
            <td colspan="7"><input class="num-input" type="number" maxlength="4" min="0"
                        [(ngModel)]="data.params.laserRoFv2" (ngModelChange)="updateData($event)">
                  <span class="no-wrap"> ticks per second per laser</span>
                  <span class="value">
                        How do I determine rate of fire for laser?<div class="tooltip"><span class="tooltiptext">Record
                                    video of game playing at 30 fps. Step through
                                    video one frame at a time and see how many frames it takes for each laser tick
                                    damage to
                                    appear.</span></div></span>
            </td>
      </tr>
      <tr>
            <td class="label">Finger RoF <div class="tooltip"><span class="tooltiptext">Finger clicks per second. Might
                              be a
                              hard limit in game (unconfirmed). Don't change if you don't know it.</span></div>
            </td>
            <td colspan="4"><input class="num-input" type="number" maxlength="4" min="0"
                        [(ngModel)]="data.params.fingerRoF" (ngModelChange)="updateData($event)">
                  <span class="no-wrap"> clicks per second</span></td>
      </tr>
      <tr>
            <td class="label">Cannon RoF <div class="tooltip"><span class="tooltiptext">Cannon Rate of Fire (seconds
                              per shot).
                              Don't change if you don't know it.</span></div>
            </td>
            <td colspan="4"><input class="num-input" type="number" maxlength="4" min="0"
                        [(ngModel)]="data.params.cannonRoF" (ngModelChange)="updateData($event)">
                  <span class="no-wrap"> seconds</span></td>
      </tr>
      <tr>
            <td colspan="3" class="heading">Coin Upgrades <div class="tooltip"><span class="tooltiptext"><img
                                    class="tooltip-img" src="assets/coins-shop.png" />Coin
                              upgrades (1st tab in shop)</span></div>
            </td>
            <td class="label right">I have</td>
            <td colspan="4">
                  <input class="big-num-input" type="number" maxlength="12" min="0" [(ngModel)]="data.skills.coins"
                        (ngModelChange)="updateData($event)">
                  <span class="value">coins</span>
                  <div class="divider"></div>
                  <button class="btn" (click)="buy()">What can I Buy?</button>
                  <div class="tooltip"><span class="tooltiptext">See what I could buy with {{ data.skills.coins |
                              number }} coins</span></div>
                  <div class="divider"></div>
                  <button class="btn" (click)="resetAttr()">Reset</button>
                  <div class="tooltip"><span class="tooltiptext">Reset all to "+1"</span></div>
            </td>
      </tr>
      <tr>
            <td class="label">Arrow Firing Rate <div class="tooltip"><span class="tooltiptext"><img class="tooltip-img"
                                    src="assets/coins-shop-arrow-rate.png" />Arrow
                              Firing Rate level (min = 1, max = 5)</span></div>
            </td>
            <td><input class="num-input" type="number" maxlength="4" min="1" max="5" [(ngModel)]="data.skills.arrowRoF"
                        (ngModelChange)="updateData($event)"></td>
            <td colspan="2" class="value">{{ data.stats.baseArrowsSec }} arrows/sec <div class="tooltip"><span
                              class="tooltiptext">Base
                              # of arrows per per
                              archer</span></div>
            </td>
            <ng-container *ngIf="data.skills.arrowRoF < 5">
                  <td class="value">+ <input class="attr-input" type="number" maxlength="2" min="0"
                              [(ngModel)]="whatIf['skills.arrowRoF']['inc']" (ngModelChange)="updateAttributes()">
                        <div class="tooltip"><span class="tooltiptext">{{ getIncTooltip(whatIf['skills.arrowRoF'],
                                    'Arrow Firing Rate') }}</span></div>
                  </td>
                  <ng-container *ngIf="whatIf['skills.arrowRoF']['inc'] > 0">
                        <td class="value"><span [class.best]="whatIf['skills.arrowRoF']['best']">+{{
                                    whatIf['skills.arrowRoF']['dpsPct'] }}%</span></td>
                        <td *ngIf="data.skills.arrowRoF >= 5" colspan="4"></td>
                        <td class="value">{{ whatIf['skills.arrowRoF']['coins'] | number }}
                              coins</td>
                        <td class="value" [class.best]="whatIf['skills.arrowRoF']['bestCoin']">{{
                              whatIf['skills.arrowRoF']['dpsPerCoin']
                              | number }}
                              dps/1000coins</td>
                  </ng-container>
                  <ng-container *ngIf="whatIf['skills.arrowRoF']['inc'] <= 0">
                        <td colspan="3"></td>
                  </ng-container>
            </ng-container>
            <td *ngIf="data.skills.arrowRoF >= 5" colspan="4"></td>
            <ng-container *ngIf="data.skills.lasers > 0">
                  <td colspan="4" rowspan="7" class="tick-table-holder">
                        <table class="tick-table">
                              <tr class="tick-table-header">
                                    <td class="tick-table-header" colspan="2"><span class="tick-table-header">Laser Tick
                                                Damage</span></td>
                                    <td class="tick-table-header right"><span class="tick-table-header">Normal</span>
                                    </td>
                                    <td class="tick-table-header right"><span class="tick-table-header">Critical</span>
                                    </td>
                              </tr>
                              <tr *ngFor="let b of getBounceData(); let i = index" class="tick-table-row">
                                    <ng-container *ngIf="i <= data.skills.bounces">
                                          <td class="left" *ngIf="i == 0"><span class="tick-table-label">Initial
                                                      Hit</span></td>
                                          <td class="left" *ngIf="i > 0"><span class="tick-table-label">Bounce # {{ i
                                                      }}</span></td>
                                          <td class="right"><span class="tick-table-value">{{
                                                      Math.round(b[data.skills.bounceDmg] * 100) }}%</span></td>
                                          <td class="right"><span
                                                      class="tick-table-value">{{
                                                      Math.floor(b[data.skills.bounceDmg] * data.stats.laser) | number }}</span>
                                          </td>
                                          <td class="right"><span
                                                      class="tick-table-value">{{
                                                      Math.floor(b[data.skills.bounceDmg] * data.stats.laserCrit) | number }}</span>
                                          </td>
                                    </ng-container>
                              </tr>
                              <tr *ngIf="data.skills.bounces > 0">
                                    <td class="left"><span class="tick-table-label">Total</span></td>
                                    <td class="right"><span class="tick-table-value">{{
                                                Math.round(data.stats.laserBounceMult
                                                * 100) }}%</span></td>
                                    <td class="right"><span class="tick-table-value">{{
                                                Math.floor(data.stats.laserBounceMult
                                                * data.stats.laser) | number }}</span></td>
                                    <td class="right"><span class="tick-table-value">{{
                                                Math.floor(data.stats.laserBounceMult
                                                * data.stats.laserCrit) | number }}</span></td>
                              </tr>
                        </table>
                  </td>
            </ng-container>
      </tr>
      <tr>
            <td class="label">Arrow Damage <div class="tooltip"><span class="tooltiptext"><img class="tooltip-img"
                                    src="assets/coins-shop-arrow.png" />Arrow
                              damage coin upgrade level</span></div>
            </td>
            <td><input class="num-input" type="number" maxlength="4" min="1" [(ngModel)]="data.skills.arrow"
                        (ngModelChange)="updateData($event)"></td>
            <td colspan="2" class="value">{{ data.stats.arrow | number }} <div class="tooltip"><span
                              class="tooltiptext">Single arrow
                              damage</span></div>
            </td>
            <td class="value">+ <input class="attr-input" type="number" maxlength="2" min="0"
                        [(ngModel)]="whatIf['skills.arrow']['inc']" (ngModelChange)="updateAttributes()">
                  <div class="tooltip"><span class="tooltiptext">{{ getIncTooltip(whatIf['skills.arrow'], 'Arrow
                              Damage') }}</span></div>
            </td>
            <ng-container *ngIf="whatIf['skills.arrow']['inc'] > 0">
                  <td class="value"><span [class.best]="whatIf['skills.arrow']['best']">+{{
                              whatIf['skills.arrow']['dpsPct'] }}%</span></td>
                  <td class="value">{{ whatIf['skills.arrow']['coins'] | number }}
                        coins</td>
                  <td class="value" [class.best]="whatIf['skills.arrow']['bestCoin']">{{
                        whatIf['skills.arrow']['dpsPerCoin']
                        | number }}
                        dps/1000coins</td>
            </ng-container>
      </tr>
      <tr>
            <td class="label">Laser Damage <div class="tooltip"><span class="tooltiptext"><img class="tooltip-img"
                                    src="assets/coins-shop-laser.png" />Laser
                              damage coin upgrade level</span></div>
            </td>
            <td><input class="num-input" type="number" min="1" [(ngModel)]="data.skills.laser"
                        (ngModelChange)="updateData($event)"></td>
            <td colspan="2" class="value">{{ data.stats.laser | number }} <div class="tooltip"><span
                              class="tooltiptext">Single laser
                              damage tick (first enemy hit)</span></div> / {{ data.stats.statsLaserDamage | number }}
                  <div class="tooltip"><span class="tooltiptext">Value shown
                              in-game on stats page for laser damage</span></div>
            </td>
            <td class="value">+ <input class="attr-input" type="number" maxlength="2" min="0"
                        [(ngModel)]="whatIf['skills.laser']['inc']" (ngModelChange)="updateAttributes()">
                  <div class="tooltip"><span class="tooltiptext">{{ getIncTooltip(whatIf['skills.laser'], 'Laser
                              Damage') }}</span></div>
            </td>
            <ng-container *ngIf="whatIf['skills.laser']['inc'] > 0">
                  <td class="value"><span [class.best]="whatIf['skills.laser']['best']">+{{
                              whatIf['skills.laser']['dpsPct'] }}%</span></td>
                  <td class="value">{{ whatIf['skills.laser']['coins'] | number }}
                        coins</td>
                  <td class="value" [class.best]="whatIf['skills.laser']['bestCoin']">{{
                        whatIf['skills.laser']['dpsPerCoin']
                        | number }}
                        dps/1000coins</td>
            </ng-container>
      </tr>
      <tr>
            <td class="label"># Mage Tower Lasers <div class="tooltip"><span class="tooltiptext"><img
                                    class="tooltip-img" src="assets/coins-shop-num-lasers.png" />#
                              of mage tower lasers (0 = none, 1 = single, 2 = dual)</span></div>
            </td>
            <td><input class="num-input" type="number" min="0" max="2" [(ngModel)]="data.skills.lasers"
                        (ngModelChange)="updateData($event)"></td>
            <td colspan="2" class="value">{{ data.stats.laserTicksPerSec }} ticks/sec <div class="tooltip"><span
                              class="tooltiptext">Total
                              # of laser
                              ticks per second from mage tower lasers, for first enemy hit (no bounces)</span></div>
            </td>
            <ng-container *ngIf="data.skills.lasers < 2">
                  <td class="value">+ <input class="attr-input" type="number" maxlength="2" min="0"
                              [(ngModel)]="whatIf['skills.lasers']['inc']" (ngModelChange)="updateAttributes()">
                        <div class="tooltip"><span class="tooltiptext">{{ getIncTooltip(whatIf['skills.lasers'], '#
                                    Lasers') }}</span></div>
                  </td>
                  <ng-container *ngIf="whatIf['skills.lasers']['inc'] > 0">
                        <td class="value"><span [class.best]="whatIf['skills.lasers']['best']">+{{
                                    whatIf['skills.lasers']['dpsPct'] }}%</span></td>
                        <td class="value">{{ whatIf['skills.lasers']['coins'] | number }}
                              coins</td>
                        <td class="value" [class.best]="whatIf['skills.lasers']['bestCoin']">{{
                              whatIf['skills.lasers']['dpsPerCoin']
                              | number }}
                              dps/1000coins</td>
                  </ng-container>
            </ng-container>
      </tr>
      <tr>
            <td class="label">Laser Bounces <div class="tooltip"><span class="tooltiptext"><img class="tooltip-img"
                                    src="assets/coins-bomb-laser-bounces.png" />#
                              of bounces per laser (0 = none, 5 = max)</span></div>
            </td>
            <td colspan="3"><input class="num-input" type="number" min="0" max="5" [(ngModel)]="data.skills.bounces"
                        (ngModelChange)="updateData($event)"></td>
            <ng-container *ngIf="data.skills.bounces < 5">
                  <td class="value">+ <input class="attr-input" type="number" maxlength="2" min="0"
                              [(ngModel)]="whatIf['skills.bounces']['inc']" (ngModelChange)="updateAttributes()">
                        <div class="tooltip"><span class="tooltiptext">{{ getIncTooltip(whatIf['skills.bounces'], '#
                                    Bounces') }}</span></div>
                  </td>
                  <ng-container *ngIf="whatIf['skills.bounces']['inc'] > 0">
                        <td class="value"><span [class.best]="whatIf['skills.bounces']['best']">+{{
                                    whatIf['skills.bounces']['dpsPct'] }}%</span></td>
                        <td class="value">{{ whatIf['skills.bounces']['coins'] | number }}
                              coins</td>
                        <td class="value" [class.best]="whatIf['skills.bounces']['bestCoin']">{{
                              whatIf['skills.bounces']['dpsPerCoin']
                              | number }}
                              dps/1000coins</td>
                  </ng-container>
            </ng-container>
      </tr>
      <tr>
            <td class="label">Laser Bounce Multiplier<div class="tooltip"><span class="tooltiptext"><img
                                    class="tooltip-img" src="assets/coins-bomb-laser-bounce-mult.png" />Laser bounce
                              damage multiplir level
                              (1 = min, 6 = max)</span></div>
            </td>
            <td><input class="num-input" type="number" min="1" max="6" [(ngModel)]="data.skills.bounceDmg"
                        (ngModelChange)="updateData($event)"></td>
            <td colspan="2" class="value">{{ data.stats.laserBounceMult }} <div class="tooltip"><span
                              class="tooltiptext">Laser
                              damage multiplier considering all bounces</span></div>
            </td>
            <ng-container *ngIf="data.skills.bounceDmg < 6">
                  <td class="value">+ <input class="attr-input" type="number" maxlength="2" min="0"
                              [(ngModel)]="whatIf['skills.bounceDmg']['inc']" (ngModelChange)="updateAttributes()">
                        <div class="tooltip"><span class="tooltiptext">{{ getIncTooltip(whatIf['skills.bounceDmg'],
                                    'Laser Bounce Multiplier') }}</span></div>
                  </td>
                  <ng-container *ngIf="whatIf['skills.bounceDmg']['inc'] > 0">
                        <td class="value"><span [class.best]="whatIf['skills.bounceDmg']['best']">+{{
                                    whatIf['skills.bounceDmg']['dpsPct']
                                    }}%</span></td>
                        <td class="value">{{ whatIf['skills.bounceDmg']['coins'] | number }}
                              coins</td>
                        <td class="value" [class.best]="whatIf['skills.bounceDmg']['bestCoin']">{{
                              whatIf['skills.bounceDmg']['dpsPerCoin']
                              | number }}
                              dps/1000coins</td>
                  </ng-container>
            </ng-container>
      </tr>
      <tr>
            <td class="label">Cannon Ball Damage <div class="tooltip"><span class="tooltiptext"><img class="tooltip-img"
                                    src="assets/coins-bomb-cannon-ball.png" />Cannon
                              ball damage level (0 = none)</span></div>
            </td>
            <td><input class="num-input" type="number" min="0" [(ngModel)]="data.skills.cannon"
                        (ngModelChange)="updateData($event)"></td>
            <td colspan="2" class="value">{{ data.stats.cannonBase | number }} <div class="tooltip"><span
                              class="tooltiptext">Cannon ball
                              damage</span></div>
            </td>
            <td class="value">+ <input class="attr-input" type="number" maxlength="2" min="0"
                        [(ngModel)]="whatIf['skills.cannon']['inc']" (ngModelChange)="updateAttributes()">
                  <div class="tooltip"><span class="tooltiptext">{{ getIncTooltip(whatIf['skills.cannon'], 'Cannon Ball
                              Damage') }}</span></div>
            </td>
            <ng-container *ngIf="whatIf['skills.cannon']['inc'] > 0">
                  <td class="value"><span [class.best]="whatIf['skills.cannon']['best']">+{{
                              whatIf['skills.cannon']['dpsPct'] }}%</span></td>
                  <td class="value">{{ whatIf['skills.cannon']['coins'] | number }}
                        coins</td>
                  <td class="value" [class.best]="whatIf['skills.cannon']['bestCoin']">{{
                        whatIf['skills.cannon']['dpsPerCoin']
                        | number }}
                        dps/1000coins</td>
            </ng-container>
      </tr>
      <tr>
            <td class="label">Cannon Bomb Damage <div class="tooltip"><span class="tooltiptext"><img class="tooltip-img"
                                    src="assets/coins-bomb-cannon-bomb.png" />Cannon
                              bomb damage level (0 = none)</span></div>
            </td>
            <td><input class="num-input" type="number" min="0" [(ngModel)]="data.skills.bomb"
                        (ngModelChange)="updateData($event)"></td>
            <td colspan="2" class="value">{{ data.stats.bombBase | number }} <div class="tooltip"><span
                              class="tooltiptext">Cannon bomb
                              damage</span></div>
            </td>
            <td class="value">+ <input class="attr-input" type="number" maxlength="2" min="0"
                        [(ngModel)]="whatIf['skills.bomb']['inc']" (ngModelChange)="updateAttributes()">
                  <div class="tooltip"><span class="tooltiptext">{{ getIncTooltip(whatIf['skills.bomb'], 'Cannon Bomb
                              Damage') }}</span></div>
            </td>
            <ng-container *ngIf="whatIf['skills.bomb']['inc'] > 0">
                  <td class="value"><span [class.best]="whatIf['skills.bomb']['best']">+{{
                              whatIf['skills.bomb']['dpsPct'] }}%</span></td>
                  <td class="value">{{ whatIf['skills.bomb']['coins'] | number }}
                        coins</td>
                  <td class="value" [class.best]="whatIf['skills.bomb']['bestCoin']">{{
                        whatIf['skills.bomb']['dpsPerCoin']
                        | number }}
                        dps/1000coins</td>
            </ng-container>
      </tr>
      <tr>
            <td class="label">Finger Damage <div class="tooltip"><span class="tooltiptext"><img class="tooltip-img"
                                    src="assets/coins-shop-finger.png" />Finger
                              damage coin upgrade level (max = 2000)</span></div>
            </td>
            <td><input class="num-input" type="number" min="1" max="2000" [(ngModel)]="data.skills.finger"
                        (ngModelChange)="updateData($event)"></td>
            <td colspan="2" class="value">{{ data.stats.finger | number }} <div class="tooltip"><span
                              class="tooltiptext">Single finger
                              click damage </span></div>
            </td>
            <ng-container *ngIf="data.skills.finger < 2000">
                  <td class="value">+ <input class="attr-input" type="number" maxlength="2" min="0"
                              [(ngModel)]="whatIf['skills.finger']['inc']" (ngModelChange)="updateAttributes()">
                        <div class="tooltip"><span class="tooltiptext">{{ getIncTooltip(whatIf['skills.finger'],
                                    'Finger Damage') }}</span></div>
                  </td>
                  <ng-container *ngIf="whatIf['skills.finger']['inc'] > 0">
                        <td class="value"><span [class.best]="whatIf['skills.finger']['best']">+{{
                                    whatIf['skills.finger']['dpsPct'] }}%</span></td>
                        <td class="value">{{ whatIf['skills.finger']['coins'] | number }}
                              coins</td>
                        <td class="value" [class.best]="whatIf['skills.finger']['bestCoin']">{{
                              whatIf['skills.finger']['dpsPerCoin'] | number }}
                              dps/1000coins</td>
                  </ng-container>
            </ng-container>
      </tr>
      <tr>
            <td class="label">Missile Damage <div class="tooltip"><span class="tooltiptext"><img class="tooltip-img"
                                    src="assets/coins-bomb-missile-damage.png" />Missile
                              damage coin upgrade level (1 = min)</span></div>
            </td>
            <td><input class="num-input" type="number" min="1" [(ngModel)]="data.skills.missileDamage"
                        (ngModelChange)="updateData($event)"></td>
            <td colspan="2" class="value">{{ data.stats.missileBase | number }} <div class="tooltip"><span
                              class="tooltiptext">Single
                              Missile/Rocket
                              damage per
                              hit</span></div>
            </td>
            <td class="value">+ <input class="attr-input" type="number" maxlength="2" min="0"
                        [(ngModel)]="whatIf['skills.missileDamage']['inc']" (ngModelChange)="updateAttributes()">
                  <div class="tooltip"><span class="tooltiptext">{{ getIncTooltip(whatIf['skills.missileDamage'],
                              'Missile Damage') }}</span></div>
            </td>
            <ng-container *ngIf="whatIf['skills.missileDamage']['inc'] > 0">
                  <td class="value"><span [class.best]="whatIf['skills.missileDamage']['best']">+{{
                              whatIf['skills.missileDamage']['dpsPct'] }}%</span></td>
                  <td class="value">{{ whatIf['skills.missileDamage']['coins'] | number }}
                        coins</td>
                  <td class="value" [class.best]="whatIf['skills.missileDamage']['bestCoin']">{{
                        whatIf['skills.missileDamage']['dpsPerCoin'] | number }}
                        dps/1000coins</td>
            </ng-container>
      </tr>
      <tr>
            <td class="label"># of Archers <div class="tooltip"><span class="tooltiptext"><img class="tooltip-img"
                                    src="assets/coins-shop-num-archers.png" />#
                              of archers coin upgrade. (1 = min, 7 = max).</span></div>
            </td>
            <td><input class="num-input" type="number" maxlength="4" min="1" max="7" [(ngModel)]="data.skills.archers"
                        (ngModelChange)="updateData($event)"></td>
            <td colspan="2" class="value">{{ Math.round(100.0 * data.stats.arrowsPerSec) / 100.0 }} arrows/sec <div
                        class="tooltip"><span class="tooltiptext">Total # of arrows per second, from all archers,
                              considering arrow
                              mastery</span></div>
            </td>
            <ng-container *ngIf="data.skills.archers < 7">
                  <td class="value">+ <input class="attr-input" type="number" maxlength="2" min="0"
                              [(ngModel)]="whatIf['skills.archers']['inc']" (ngModelChange)="updateAttributes()">
                        <div class="tooltip"><span class="tooltiptext">{{ getIncTooltip(whatIf['skills.archers'], '#
                                    Archers') }}</span></div>
                  </td>
                  <ng-container *ngIf="whatIf['skills.archers']['inc'] > 0">
                        <td class="value"><span [class.best]="whatIf['skills.archers']['best']">+{{
                                    whatIf['skills.archers']['dpsPct']
                                    }}%</span></td>
                        <td class="value">{{ whatIf['skills.archers']['coins'] | number }}
                              coins</td>
                        <td class="value" [class.best]="whatIf['skills.archers']['bestCoin']">{{
                              whatIf['skills.archers']['dpsPerCoin'] | number }}
                              dps/1000coins</td>
                  </ng-container>
            </ng-container>
      </tr>
      <tr>
            <td class="label">Missile Firing Rate <div class="tooltip"><span class="tooltiptext"><img
                                    class="tooltip-img" src="assets/coins-bomb-missile-rate.png" />Missile
                              Firing Rate coin upgrade level. (0 = min, 20 = max)</span></div>
            </td>
            <td><input class="num-input" type="number" maxlength="4" min="0" max="20"
                        [(ngModel)]="data.skills.missileFiringRate" (ngModelChange)="updateData($event)"></td>
            <td colspan="2" class="value">{{ data.stats.missileROF }} sec/missile</td>
            <ng-container *ngIf="data.skills.missileFiringRate < 20">
                  <td class="value">+ <input class="attr-input" type="number" maxlength="2" min="0"
                              [(ngModel)]="whatIf['skills.missileFiringRate']['inc']"
                              (ngModelChange)="updateAttributes()">
                        <div class="tooltip"><span class="tooltiptext">{{
                                    getIncTooltip(whatIf['skills.missileFiringRate'], 'Missile Firing Rate') }}</span>
                        </div>
                  </td>
                  <ng-container *ngIf="whatIf['skills.missileFiringRate']['inc'] > 0">
                        <td class="value"><span [class.best]="whatIf['skills.missileFiringRate']['best']">+{{
                                    whatIf['skills.missileFiringRate']['dpsPct'] }}%</span></td>
                        <td class="value">{{ whatIf['skills.missileFiringRate']['coins'] | number }}
                              coins</td>
                        <td class="value" [class.best]="whatIf['skills.missileFiringRate']['bestCoin']">{{
                              whatIf['skills.missileFiringRate']['dpsPerCoin'] | number }}
                              dps/1000coins</td>
                  </ng-container>
            </ng-container>
      </tr>
      <tr>
            <td class="label"># of Missiles<div class="tooltip"><span class="tooltiptext"><img class="tooltip-img"
                                    src="assets/coins-bomb-num-missilesv2.png" />Total
                              # of missiles (do not count rockets)/ (0 = none, 1 = max)</span></div>
            </td>
            <td><input class="num-input" type="number" maxlength="4" min="0" max="1"
                        [(ngModel)]="data.skills.numMissiles" (ngModelChange)="updateData($event)"></td>
            <td colspan="2" class="value">{{ data.stats.missilesPerSec }} missiles/sec <div class="tooltip"><span
                              class="tooltiptext">Total
                              # of missiles per second</span></div>
            </td>
            <ng-container *ngIf="data.skills.numMissiles < 1">
                  <td class="value">+ <input class="attr-input" type="number" maxlength="2" min="0"
                              [(ngModel)]="whatIf['skills.numMissiles']['inc']" (ngModelChange)="updateAttributes()">
                        <div class="tooltip"><span class="tooltiptext">{{ getIncTooltip(whatIf['skills.numMissiles'],
                                    '# Missiles') }}</span></div>
                  </td>
                  <ng-container *ngIf="whatIf['skills.numMissiles']['inc'] > 0">
                        <td class="value"><span [class.best]="whatIf['skills.numMissiles']['best']">+{{
                                    whatIf['skills.numMissiles']['dpsPct']
                                    }}%</span></td>
                        <td class="value">{{ whatIf['skills.numMissiles']['coins'] | number }}
                              coins</td>
                        <td class="value" [class.best]="whatIf['skills.numMissiles']['bestCoin']">{{
                              whatIf['skills.numMissiles']['dpsPerCoin'] | number }}
                              dps/1000coins</td>
                  </ng-container>
            </ng-container>
      </tr>
      <tr>
            <td class="heading">Power Gems <div class="tooltip"><span class="tooltiptext"><img
                                    class="tooltip-img" src="assets/power.png" />Upgrades
                              from red power gems (bottom tab)</span></div>
            </td>
            <td colspan="2" class="value">{{ data.gems }} <div class="tooltip"><span class="tooltiptext">Total # of power gems required (does not include 5 for rocket launcher seek)</span></div></td>
            <td class="no-wrap">
                  <button class="btn" (click)="optimizeGems()">Optimize</button>
                  <div class="tooltip"><span class="tooltiptext">Optimize power gems to maximize total DPS</span></div>
                  <div class="divider"></div>
            </td>
            <td colspan="7" *ngIf="log && (log.gems > 0)" class="value">
                  <span>Evaluated {{ log.count | number }} combinations in {{ log.elapsedTime | number }}ms</span>
                  <span *ngIf="log.elapsedTime > 0"> ( {{ Math.round(log.count / log.elapsedTime) | number }}
                        combos/ms)</span>
            </td>
      </tr>
      <tr>
            <td class="label">Arrow Damage <div class="tooltip"><span class="tooltiptext"><img class="tooltip-img"
                                    src="assets/power-arrow.png" />Arrow
                              damage power level</span></div>
            </td>
            <td colspan="2"><input class="num-input" type="number" maxlength="4" min="0" [(ngModel)]="data.power.arrow"
                        (ngModelChange)="updateData($event)"></td>
            <td>
                  <input class="num-input" class="cb" type="checkbox" [(ngModel)]="data.power.lockArrow" id="lock-cb">
                  <label class="cb-label" for="lock-cb">Lock <div class="tooltip"><span class="tooltiptext">Lock
                                    current gems (only add levels when optimizing power gems)</span></div>
                  </label>

            </td>
            <td class="value">+ <input class="attr-input" type="number" maxlength="2" min="0"
                        [(ngModel)]="whatIf['power.arrow']['inc']" (ngModelChange)="updateAttributes()">
                  <div class="tooltip"><span class="tooltiptext">{{ getIncTooltip(whatIf['power.arrow'], 'Arrow
                              Damage') }}</span></div>
            </td>
            <ng-container *ngIf="whatIf['power.arrow']['inc'] > 0">
                  <td class="value"><span [class.best]="whatIf['power.arrow']['best']">+{{
                              whatIf['power.arrow']['dpsPct']
                              }}%</span></td>
                  <td class="value">{{ whatIf['power.arrow']['coins'] | number }}
                        gems</td>
                  <td class="value" [class.best]="whatIf['power.arrow']['bestCoin']">{{
                        whatIf['power.arrow']['dpsPerCoin'] | number }}
                        dps/gem</td>
            </ng-container>
      </tr>
      <tr>
            <td class="label">Laser Damage <div class="tooltip"><span class="tooltiptext"><img class="tooltip-img"
                                    src="assets/power-laser.png" />Laser
                              damage power level</span></div>
            </td>
            <td colspan="2"><input class="num-input" type="number" maxlength="4" min="0" [(ngModel)]="data.power.laser"
                        (ngModelChange)="updateData($event)"></td>
            <td>
                  <input class="num-input" class="cb" type="checkbox" [(ngModel)]="data.power.lockLaser" id="lock-cb">
                  <label class="cb-label" for="lock-cb">Lock <div class="tooltip"><span class="tooltiptext">Lock
                                    current gems (only add levels when optimizing power gems)</span></div>
                  </label>

            </td>
            <td class="value">+ <input class="attr-input" type="number" maxlength="2" min="0"
                        [(ngModel)]="whatIf['power.laser']['inc']" (ngModelChange)="updateAttributes()">
                  <div class="tooltip"><span class="tooltiptext">{{ getIncTooltip(whatIf['power.laser'], 'Laser
                              Damage') }}</span></div>
            </td>
            <ng-container *ngIf="whatIf['power.laser']['inc'] > 0">
                  <td class="value"><span [class.best]="whatIf['power.laser']['best']">+{{
                              whatIf['power.laser']['dpsPct']
                              }}%</span></td>
                  <td class="value">{{ whatIf['power.laser']['coins'] | number }}
                        gems</td>
                  <td class="value" [class.best]="whatIf['power.laser']['bestCoin']">{{
                        whatIf['power.laser']['dpsPerCoin'] | number }}
                        dps/gem</td>
            </ng-container>
      </tr>
      <tr>
            <td class="label">Missile Damage <div class="tooltip"><span class="tooltiptext"><img class="tooltip-img"
                                    src="assets/power-missile.png" />Missile
                              damage power level</span></div>
            </td>
            <td colspan="2"><input class="num-input" type="number" maxlength="4" min="0"
                        [(ngModel)]="data.power.missile" (ngModelChange)="updateData($event)"></td>
            <td>
                  <input class="num-input" class="cb" type="checkbox" [(ngModel)]="data.power.lockMissile" id="lock-cb">
                  <label class="cb-label" for="lock-cb">Lock <div class="tooltip"><span class="tooltiptext">Lock
                                    current gems (only add levels when optimizing power gems)</span></div>
                  </label>

            </td>
            <td class="value">+ <input class="attr-input" type="number" maxlength="2" min="0"
                        [(ngModel)]="whatIf['power.missile']['inc']" (ngModelChange)="updateAttributes()">
                  <div class="tooltip"><span class="tooltiptext">{{ getIncTooltip(whatIf['power.missile'], 'Missile
                              Damage') }}</span></div>
            </td>
            <ng-container *ngIf="whatIf['power.missile']['inc'] > 0">
                  <td class="value"><span [class.best]="whatIf['power.missile']['best']">+{{
                              whatIf['power.missile']['dpsPct'] }}%</span></td>
                  <td class="value">{{ whatIf['power.missile']['coins'] | number }}
                        gems</td>
                  <td class="value" [class.best]="whatIf['power.missile']['bestCoin']">{{
                        whatIf['power.missile']['dpsPerCoin'] | number }}
                        dps/gem</td>
            </ng-container>
      </tr>
      <tr>
            <td class="label"># Rockets <div class="tooltip"><span class="tooltiptext"><img class="tooltip-img"
                                    src="assets/coins-bomb-num-rockets.png" />#
                              of Rockets (0 = none, 9 = max)</span></div>
            </td>
            <td><input class="num-input" type="number" maxlength="4" min="0" max="9" [(ngModel)]="data.power.numRockets"
                        (ngModelChange)="updateData($event)"></td>
            <td class="value">{{ data.stats.rocketsPerSec }} rockets/sec <div class="tooltip"><span
                              class="tooltiptext">Total
                              # of rockets per second</span></div>
            </td>
            <td>
                  <input class="num-input" class="cb" type="checkbox" [(ngModel)]="data.power.lockRockets" id="lock-cb">
                  <label class="cb-label" for="lock-cb">Lock <div class="tooltip"><span class="tooltiptext">Lock
                                    current gems (only add levels when optimizing power gems)</span></div>
                  </label>

            </td>
            <ng-container *ngIf="data.power.numRockets < 9">
                  <td class="value">+ <input class="attr-input" type="number" maxlength="2" min="0"
                              [(ngModel)]="whatIf['power.numRockets']['inc']" (ngModelChange)="updateAttributes()">
                        <div class="tooltip"><span class="tooltiptext">{{ getIncTooltip(whatIf['power.numRockets'], '#
                                    Rockets') }}</span></div>
                  </td>
                  <ng-container *ngIf="whatIf['power.numRockets']['inc'] > 0">
                        <td class="value"><span [class.best]="whatIf['power.numRockets']['best']">+{{
                                    whatIf['power.numRockets']['dpsPct'] }}%</span></td>
                        <td class="value">{{ whatIf['power.numRockets']['coins'] | number }}
                              gems</td>
                        <td class="value" [class.best]="whatIf['power.numRockets']['bestCoin']">{{
                              whatIf['power.numRockets']['dpsPerCoin'] | number }}
                              dps/gem</td>
                  </ng-container>
            </ng-container>
      </tr>
      <tr>
            <td class="label">Unspent <div class="tooltip"><span class="tooltiptext"><img class="tooltip-img"
                                    src="assets/power-unspent.png" />#
                              of unspent power gems</span></div>
            </td>
            <td><input class="num-input" type="number" maxlength="4" min="0" [(ngModel)]="data.power.unspent"
                        (ngModelChange)="updateData($event)"></td>
      </tr>
      <tr>
            <td colspan="3" class="heading">Talents <div class="tooltip"><span class="tooltiptext"><img
                                    class="tooltip-img" src="assets/talents.png" />Talent
                              (mushroom) upgrades (2nd tab in shop)</span></div>
            </td>
            <td class="no-wrap">
                  <button class="btn" (click)="optimize()">Optimize</button>
                  <div class="tooltip"><span class="tooltiptext">Optimize talents to maximize total DPS</span></div>
                  <div class="divider"></div>
            </td>
            <td colspan="7" *ngIf="log && (log.levels > 0)" class="value">
                  <span>Evaluated {{ log.count | number }} combinations in {{ log.elapsedTime | number }}ms</span>
                  <span *ngIf="log.elapsedTime > 0"> ( {{ Math.round(log.count / log.elapsedTime) | number }}
                        combos/ms)</span>
            </td>
      </tr>
      <tr>
            <td class="label">Arrow Damage <div class="tooltip"><span class="tooltiptext"><img class="tooltip-img"
                                    src="assets/talents-arrow.png" />Arrow
                              Damage (3% per level)</span></div>
            </td>
            <td><input class="num-input" type="number" maxlength="4" min="0" [(ngModel)]="data.talents.arrow"
                        (ngModelChange)="updateData($event)"></td>
            <td class="value">{{ Math.round(data.stats.arrowPct * 100.0) | number }} %</td>
            <td>
                  <input class="num-input" class="cb" type="checkbox" [(ngModel)]="data.talents.lockArrow" id="lock-cb">
                  <label class="cb-label" for="lock-cb">Lock <div class="tooltip"><span class="tooltiptext">Lock
                                    current points (only add points when optimizing talents)</span></div>
                  </label>

            </td>
            <td class="value">+ <input class="attr-input" type="number" maxlength="2" min="0"
                        [(ngModel)]="whatIf['talents.arrow']['inc']" (ngModelChange)="updateAttributes()">
                  <div class="tooltip"><span class="tooltiptext">{{ getIncTooltip(whatIf['talents.arrow'], 'Arrow
                              Damage') }}</span></div>
            </td>
            <ng-container *ngIf="whatIf['talents.arrow']['inc'] > 0">
                  <td class="value"><span [class.best]="whatIf['talents.arrow']['best']">+{{
                              whatIf['talents.arrow']['dpsPct'] }}%</span></td>
            </ng-container>
            <ng-container *ngIf="whatIf['talents.arrow']['inc'] <= 0">
                  <td></td>
            </ng-container>
            <td class="label">Average Arrow Damage <div class="tooltip"><span class="tooltiptext">Average single
                              arrow
                              damage
                              (considering crtis, super crits)</span></div>
            </td>
            <td class="value">{{ Math.round(data.stats.avgArrow * 10.0) / 10.0 | number }}</td>
      </tr>
      <tr>
            <td class="label">Laser Damage <div class="tooltip"><span class="tooltiptext"><img class="tooltip-img"
                                    src="assets/talents-laser.png" />Laser
                              damage (3% per level)</span></div>
            </td>
            <td><input class="num-input" type="number" min="0" [(ngModel)]="data.talents.laser"
                        (ngModelChange)="updateData($event)"></td>
            <td class="value">{{ Math.round(data.stats.laserPct * 100) | number }} %</td>
            <td>
                  <input class="num-input" class="cb" type="checkbox" [(ngModel)]="data.talents.lockLaser" id="lock-cb">
                  <label class="cb-label" for="lock-cb">Lock <div class="tooltip"><span class="tooltiptext">Lock
                                    current points (only add points when optimizing talents)</span></div>
                  </label>

            </td>
            <td class="value">+ <input class="attr-input" type="number" maxlength="2" min="0"
                        [(ngModel)]="whatIf['talents.laser']['inc']" (ngModelChange)="updateAttributes()">
                  <div class="tooltip"><span class="tooltiptext">{{ getIncTooltip(whatIf['talents.laser'], 'Laser
                              Damage') }}</span></div>
            </td>
            <ng-container *ngIf="whatIf['talents.laser']['inc'] > 0">
                  <td class="value"><span [class.best]="whatIf['talents.laser']['best']">+{{
                              whatIf['talents.laser']['dpsPct'] }}%</span></td>
            </ng-container>
            <ng-container *ngIf="whatIf['talents.laser']['inc'] <= 0">
                  <td></td>
            </ng-container>
            <td class="label">Average Laser Damage <div class="tooltip"><span class="tooltiptext">Average laser tick
                              damage on initial hit, considering crits</span></div>
            </td>
            <td class="value">{{ Math.round(data.stats.avgLaser * 10.0) / 10.0 | number }}</td>
      </tr>
      <tr>
            <td class="label">Finger Damage <div class="tooltip"><span class="tooltiptext"><img class="tooltip-img"
                                    src="assets/talents-finger.png" />Finger
                              damage (3% per level).</span></div>
            </td>
            <td><input class="num-input" type="number" min="0" [(ngModel)]="data.talents.finger"
                        (ngModelChange)="updateData($event)"></td>
            <td class="value">{{ Math.round(data.stats.fingerPct * 100) | number }} %</td>
            <td>
                  <input class="num-input" class="cb" type="checkbox" [(ngModel)]="data.talents.lockFinger"
                        id="lock-cb">
                  <label class="cb-label" for="lock-cb">Lock <div class="tooltip"><span class="tooltiptext">Lock
                                    current points (only add points when optimizing talents)</span></div>
                  </label>
            </td>
            <td class="value">+ <input class="attr-input" type="number" maxlength="2" min="0"
                        [(ngModel)]="whatIf['talents.finger']['inc']" (ngModelChange)="updateAttributes()">
                  <div class="tooltip"><span class="tooltiptext">{{ getIncTooltip(whatIf['talents.finger'], 'Finger
                              Damage') }}</span></div>
            </td>
            <ng-container *ngIf="whatIf['talents.finger']['inc'] > 0">
                  <td class="value"><span [class.best]="whatIf['talents.finger']['best']">+{{
                              whatIf['talents.finger']['dpsPct'] }}%</span></td>
            </ng-container>
            <ng-container *ngIf="whatIf['talents.finger']['inc'] <= 0">
                  <td></td>
            </ng-container>
      </tr>
      <tr>
            <td class="label">Crit Chance <div class="tooltip"><span class="tooltiptext"><img class="tooltip-img"
                                    src="assets/talents-crit-chance.png" />Critical
                              Hit Chance (1% per level, max
                              100%)</span></div>
            </td>
            <td><input class="num-input" type="number" min="0" max="100" [(ngModel)]="data.talents.critChance"
                        (ngModelChange)="updateData($event)"></td>
            <td class="value">{{ data.talents.critChance }} %</td>
            <td>
                  <input class="num-input" class="cb" type="checkbox" [(ngModel)]="data.talents.lockCC" id="lock-cb">
                  <label class="cb-label" for="lock-cb">Lock <div class="tooltip"><span class="tooltiptext">Lock
                                    current points (only add points when optimizing talents)</span></div>
                  </label>

            </td>
            <td class="value" *ngIf="data.talents.critChance < 100">+ <input class="attr-input" type="number"
                        maxlength="2" min="0" [(ngModel)]="whatIf['talents.critChance']['inc']"
                        (ngModelChange)="updateAttributes()">
                  <div class="tooltip"><span class="tooltiptext">{{ getIncTooltip(whatIf['talents.critChance'], 'Crit
                              Chance') }}</span></div>
            </td>
            <td class="value" *ngIf="(data.talents.critChance < 100) && (whatIf['talents.critChance']['inc'] > 0)"><span
                        [class.best]="whatIf['talents.critChance']['best']">+{{
                        whatIf['talents.critChance']['dpsPct'] }}%</span></td>
            <td *ngIf="(data.talents.critChance >= 100) || (whatIf['talents.critChance']['inc'] <= 0)" colspan="2"></td>
            <td class="label">Arrow Crit Damage <div class="tooltip"><span class="tooltiptext">Single arrow critical
                              hit</span></div>
            </td>
            <td class="value">{{ Math.round(data.stats.arrowCrit) | number }}</td>
      </tr>
      <tr>
            <td class="label">Crit Damage <div class="tooltip"><span class="tooltiptext"><img class="tooltip-img"
                                    src="assets/talents-crit-damage.png" />Critical
                              Damage (5% per level)</span></div>
            </td>
            <td><input class="num-input" type="number" min="0" [(ngModel)]="data.talents.critDamage"
                        (ngModelChange)="updateData($event)"></td>
            <td class="value">{{ 150 + (data.talents.critDamage * 5) | number }} %</td>
            <td>
                  <input class="num-input" class="cb" type="checkbox" [(ngModel)]="data.talents.lockCD" id="lock-cb">
                  <label class="cb-label" for="lock-cb">Lock <div class="tooltip"><span class="tooltiptext">Lock
                                    current points (only add points when optimizing talents)</span></div>
                  </label>

            </td>
            <td class="value">+ <input class="attr-input" type="number" maxlength="2" min="0"
                        [(ngModel)]="whatIf['talents.critDamage']['inc']" (ngModelChange)="updateAttributes()">
                  <div class="tooltip"><span class="tooltiptext">{{ getIncTooltip(whatIf['talents.critDamage'], 'Crit
                              Damage') }}</span></div>
            </td>
            <ng-container *ngIf="whatIf['talents.critDamage']['inc'] > 0">
                  <td class="value"><span [class.best]="whatIf['talents.critDamage']['best']">+{{
                              whatIf['talents.critDamage']['dpsPct'] }}%</span></td>
            </ng-container>
            <ng-container *ngIf="whatIf['talents.critDamage']['inc'] <= 0">
                  <td></td>
            </ng-container>
            <ng-container *ngIf="data.talents.arrowMastery >= 1">
                  <td class="label">Arrow Super Crit Damage<div class="tooltip"><span class="tooltiptext">Single arrow
                                    super
                                    critical
                                    hit (double critical hit damage)</span></div>
                  </td>
                  <td class="value">{{ Math.round(data.stats.superCrit) | number }}</td>
            </ng-container>
      </tr>
      <tr>
            <td class="label">Defense <div class="tooltip"><span class="tooltiptext"><img class="tooltip-img"
                                    src="assets/talents-defense.png" />#
                              of defense talent points. These will be "locked" and will not be redistributed when you
                              click Optimize
                              button.</span></div>
            </td>
            <td colspan="2"><input class="num-input" type="number" maxlength="4" min="0"
                        [(ngModel)]="data.talents.defense" (ngModelChange)="updateData($event)"></td>
            <td>
                  <input class="num-input" class="cb" type="checkbox" [(ngModel)]="data.talents.lockDefense"
                        id="lock-cb">
                  <label class="cb-label" for="lock-cb">Lock <div class="tooltip"><span class="tooltiptext">Lock
                                    current points (only add points when optimizing talents)</span></div>
                  </label>

            </td>
      </tr>
      <tr>
            <td class="label">Unspent <div class="tooltip"><span class="tooltiptext"><img class="tooltip-img"
                                    src="assets/talents-unspent.png" />#
                              of unspent talent points</span></div>
            </td>
            <td><input class="num-input" type="number" maxlength="4" min="0" [(ngModel)]="data.talents.unspent"
                        (ngModelChange)="updateData($event)"></td>
      </tr>
      <tr>
            <td class="heading">Masteries <div class="tooltip"><span class="tooltiptext"><img class="tooltip-img"
                                    src="assets/laser-mastery.png" />Arrow/Laser
                              Mastery</span></div>
            </td>
      </tr>
      <tr>
            <td class="label">Arrow Mastery <div class="tooltip"><span class="tooltiptext"><img class="tooltip-img"
                                    src="assets/arrow-mastery.png" />Arrow
                              Mastery Tier (min = 0, max = 3)</span></div>
            </td>

            <td><input class="num-input" type="number" min="0" max="3" [(ngModel)]="data.talents.arrowMastery"
                        (ngModelChange)="updateArrowMastery($event)"></td>
            <td class="value"><span *ngIf="data.talents.arrowMastery > 0">{{ data.stats.arrowMasteryPct * 100 }} %
                        <div *ngIf="data.talents.arrowMastery >= 1" class="mastery-img"></div>
                        <div *ngIf="data.talents.arrowMastery >= 2" class="mastery-img"></div>
                        <div *ngIf="data.talents.arrowMastery >= 3" class="mastery-img"></div>
                  </span>
            </td>
            <td>
                  <input class="num-input" class="cb" type="checkbox" [(ngModel)]="data.talents.lockArrowMastery"
                        id="lock-cb">
                  <label class="cb-label" for="lock-cb">Lock <div class="tooltip"><span class="tooltiptext">Lock
                                    current mastery tier (only add tiers when optimizing talents)</span></div>
                  </label>

            </td>
            <ng-container *ngIf="data.talents.arrowMastery < 3">
                  <td class="value">+ <input class="attr-input" type="number" maxlength="2" min="0"
                              [(ngModel)]="whatIf['talents.arrowMastery']['inc']" (ngModelChange)="updateAttributes()">
                        <div class="tooltip"><span class="tooltiptext">{{ getIncTooltip(whatIf['talents.arrowMastery'],
                                    'Arrow Mastery Tier') }}</span></div>
                  </td>
                  <ng-container *ngIf="whatIf['talents.arrowMastery']['inc'] > 0">
                        <td class="value"><span [class.best]="whatIf['talents.arrowMastery']['best']">+{{
                                    whatIf['talents.arrowMastery']['dpsPct'] }}%</span></td>
                  </ng-container>
                  <ng-container *ngIf="whatIf['talents.arrowMastery']['inc'] <= 0">
                        <td></td>
                  </ng-container>
            </ng-container>
            <ng-container *ngIf="data.talents.arrowMastery >= 3">
                  <td colspan="2"></td>
            </ng-container>
            <ng-container *ngIf="data.talents.arrowMastery >= 1">
                  <td class="label">Arrow Super Crit Chance <div class="tooltip"><span class="tooltiptext">Chance of
                                    arrow
                                    super crit
                                    (double
                                    critical hit damage, for arrows only)</span></div>
                  </td>
                  <td class="value">{{ data.stats.superCritChance * 100 }} %</td>
            </ng-container>
      </tr>
      <tr>
            <td class="label">Laser Mastery <div class="tooltip"><span class="tooltiptext"><img class="tooltip-img"
                                    src="assets/laser-mastery.png" />Laser
                              Mastery Tier (min = 0, max = 3)</span></div>
            </td>

            <td><input class="num-input" type="number" min="0" max="3" [(ngModel)]="data.talents.laserMastery"
                        (ngModelChange)="updateLaserMastery($event)"></td>
            <td class="value"><span *ngIf="data.talents.laserMastery > 0">{{ data.stats.laserMasteryPct * 100 }} %
                        <div *ngIf="data.talents.laserMastery >= 1" class="mastery-img"></div>
                        <div *ngIf="data.talents.laserMastery >= 2" class="mastery-img"></div>
                        <div *ngIf="data.talents.laserMastery >= 3" class="mastery-img"></div>
                  </span>
            </td>
            <td>
                  <input class="num-input" class="cb" type="checkbox" [(ngModel)]="data.talents.lockLaserMastery"
                        id="lock-cb">
                  <label class="cb-label" for="lock-cb">Lock <div class="tooltip"><span class="tooltiptext">Lock
                                    current mastery tier (only add tiers when optimizing talents)</span></div>
                  </label>
            </td>
            <ng-container *ngIf="data.talents.laserMastery < 3">
                  <td class="value">+ <input class="attr-input" type="number" maxlength="2" min="0"
                              [(ngModel)]="whatIf['talents.laserMastery']['inc']" (ngModelChange)="updateAttributes()">
                        <div class="tooltip"><span class="tooltiptext">{{ getIncTooltip(whatIf['talents.laserMastery'],
                                    'Laser Mastery Tier') }}</span></div>
                  </td>
                  <ng-container *ngIf="whatIf['talents.laserMastery']['inc'] > 0">
                        <td class="value"><span [class.best]="whatIf['talents.laserMastery']['best']">+{{
                                    whatIf['talents.laserMastery']['dpsPct'] }}%</span></td>
                  </ng-container>
                  <ng-container *ngIf="whatIf['talents.laserMastery']['inc'] <= 0">
                        <td></td>
                  </ng-container>
            </ng-container>
            <ng-container *ngIf="data.talents.laserMastery >= 3">
                  <td colspan="2"></td>
            </ng-container>
            <ng-container *ngIf="data.stats.laserArchers > 0">
                  <td class="label"># Laser Archers <div class="tooltip"><span class="tooltiptext">Number of laser
                                    archers
                                    from laser
                                    mastery</span></div>
                  </td>
                  <td class="value">{{ data.stats.laserArchers }}
                        <ng-container *ngIf="data.stats.laserArcherBounceFactor > 1">
                              x {{ data.stats.laserArcherBounceFactor }} <div class="tooltip"><span
                                          class="tooltiptext">Laser
                                          archer damage multiplier considering all laser archer bounces</span></div>
                        </ng-container>
                  </td>
            </ng-container>
      </tr>
      <tr>
            <td class="heading">Damage Per Second <div class="tooltip"><span class="tooltiptext">Damage done per second
                              to
                              target</span></div>
            </td>
            <td colspan="5"></td>
            <ng-container *ngIf="data.stats.laserArchers > 0">
                  <td class="label">Laser Archer RoF <div class="tooltip"><span class="tooltiptext">Total # of laser
                                    ticks
                                    per second
                                    from laser archers, for first enemy hit (no bounces)</span></div>
                  </td>
                  <td class="value">{{ data.stats.laserArcherTicksPerSec }} ticks/sec</td>
            </ng-container>
      </tr>
      <tr>
            <td class="label">Arrow DPS <div class="tooltip"><span class="tooltiptext">Damage per second from
                              arrows</span></div>
            </td>
            <td colspan="2" class="value">{{ Math.round(data.stats.arrowDps * 10.0) / 10.0 | number }}/sec ({{
                  Math.round(data.stats.arrowDpsPct * 10000.0) / 100.0 | number }} %)</td>
      </tr>
      <tr>
            <td class="label">Laser DPS <div class="tooltip"><span class="tooltiptext">Damage per second from
                              lasers</span></div>
            </td>
            <td colspan="2" class="value">{{ Math.round(data.stats.laserDps * 10.0) / 10.0 | number }}/sec ({{
                  Math.round(data.stats.laserDpsPct * 10000.0) / 100.0 | number }} %)</td>
      </tr>
      <tr>
            <td class="label">Cannon DPS <div class="tooltip"><span class="tooltiptext">Damage per second from cannon
                              (ball +
                              bomb)</span></div>
            </td>
            <td colspan="2" class="value">{{ Math.round(data.stats.cannonDps * 10.0) / 10.0 | number }}/sec ({{
                  Math.round(data.stats.cannonDpsPct * 10000.0) / 100.0 | number }} %)</td>
      </tr>
      <tr>
            <td class="label">Finger DPS <div class="tooltip"><span class="tooltiptext">Damage per second from finger
                              clicks</span></div>
            </td>
            <td colspan="2" class="value">{{ Math.round(data.stats.fingerDps * 10.0) / 10.0 | number }}/sec ({{
                  Math.round(data.stats.fingerDpsPct * 10000.0) / 100.0 | number }} %)</td>
      </tr>
      <tr>
            <td class="label">Missile DPS <div class="tooltip"><span class="tooltiptext">Damage per second from
                              missiles and rockets</span></div>
            </td>
            <td colspan="2" class="value">{{ Math.round(data.stats.missileDps * 10.0) / 10.0 | number }}/sec ({{
                  Math.round(data.stats.missileDpsPct * 10000.0) / 100.0 | number }} %)</td>
      </tr>
      <tr>
            <td class="label">Total DPS<div class="tooltip"><span class="tooltiptext">Total damage per second</span>
                  </div>
            </td>
            <td colspan="2" class="value">{{ Math.round(data.stats.totalDps * 10.0) / 10.0 | number }}/sec</td>
      </tr>
      <tr>
            <td>&nbsp;</td>
      </tr>
      <tr>
            <td colspan="3"><a class="link" target="_blank"
                        href="https://www.kongregate.com/forums/1013821-grow-defense/topics/1792735-damage-simulator-talent-optimizer">Forum
                        Post</a></td>
      </tr>
      <tr>
            <td colspan="3"><a class="link" target="_blank"
                        href="https://www.kongregate.com/games/endomlic/grow-defense">Play
                        Grow Defense
                        on Kongregate</a></td>
      </tr>
      <tr>
            <td colspan="3" class="note">Version {{ version }} ( {{ versionDate }} ) <a class="link"
                        href="assets/changelog.txt" target="_blank">change
                        log</a></td>
      </tr>
</table>